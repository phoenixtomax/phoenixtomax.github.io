<h1 id="caffe-tools">Caffe Tools</h1>

<h3 id="file-suffix">File suffix</h3>
<ol>
  <li>
    <p>.binaryprototxt: The mean value of input images.</p>
  </li>
  <li>
    <p>.prototxt
1) solver.prototxt:          Wrap configuration of caffe training
2) .prototxt:                Layer descriptions
   deploy.prototxt is similiar to train_val.prototxt.
   BUT They are different.</p>

    <p>I.  deploy.prototxt:       raw model</p>

    <p>Data Layer</p>
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   name: "CaffeNet"                                             
   layer {                                                      
     name: "data"                                               
     type: "Input"                                              
     top: "data"                                                
     input_param { shape: { dim: 10 dim: 3 dim: 227 dim: 227 } }
   }
</code></pre></div>    </div>

    <p>Softmax</p>
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   layer {          
     name: "prob"   
     type: "Softmax"
     bottom: "fc8"  
     top: "prob"    
   }                
</code></pre></div>    </div>
    <p>II. train_val.prototxt:    configured model for training or testing.</p>

    <p>Data Layer</p>
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   name: "CaffeNet"
   layer {
     name: "data"
     type: "Data"                                          
     top: "data"
     top: "label"                                          
     include {                                             
       phase: TRAIN                                        
     }                                                     
     transform_param {                                     
       mirror: true                                        
       crop_size: 227                                      
       mean_file: "data/ilsvrc12/imagenet_mean.binaryproto"
     }                                                     
   # mean pixel / channel-wise mean instead of mean image  
   #  transform_param {                                    
   #    crop_size: 227                                     
   #    mean_value: 104                                    
   #    mean_value: 117                                    
   #    mean_value: 123                                    
   #    mirror: true                                       
   #  }                                                    
     data_param {                                          
       source: "examples/imagenet/ilsvrc12_train_lmdb"     
       batch_size: 256                                     
       backend: LMDB                                       
     }                                                     
   }                                                                                                 
</code></pre></div>    </div>

    <p>Accuracy</p>
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   layer {                  
     name: "accuracy"       
     type: "Accuracy"       
     bottom: "fc8"          
     bottom: "label"        
     top: "accuracy"        
     include {              
       phase: TEST          
     }                      
   }
</code></pre></div>    </div>
    <p>Softmax</p>
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   layer {                   
     name: "loss"            
     type: "SoftmaxWithLoss" 
     bottom: "fc8"           
     bottom: "label"         
     top: "loss"             
   }                         
</code></pre></div>    </div>
    <h4 id="grammary">Grammary</h4>
    <p>bottom: the input of layer</p>

    <p>up: the output of layer</p>

    <p>include {}:  specify phase(TEST/TRAIN) of caffe.</p>
  </li>
  <li>.caffemodel: weights of specified layer description.
    <ul>
      <li>TIPS: The layer descriptions seems also to be written into .caffemodel.</li>
    </ul>
  </li>
  <li>lmdb/leveldb: the database of input images.
    <ul>
      <li>TIPS: the lmdb(B+ Tree) consume more memory that leveldb. But itâ€™s faster than leveldb.</li>
    </ul>

    <p>Refs: <a href="http://www.lmdb.tech/doc/">LMDB</a></p>
  </li>
  <li>file list: the file path of input images &amp; the classes of each which follows file path.</li>
</ol>

<h3 id="tools">Tools</h3>
<ol>
  <li>
    <p>compute_image_mean: compute mean value of images into .binaryprototxt</p>
  </li>
  <li>
    <p>upgrade_net_proto_text: Upgrade old prototxt file into new prototxt file.</p>
  </li>
  <li>
    <p>convert_imageset: Convert images(png/jpg) into database (lmdb/leveldb)</p>
  </li>
</ol>
