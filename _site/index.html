<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1" />


	<title>The Interesting Times of Skipper</title>


<meta name="description" content="Programmers never be slaves !!!!">

<link rel="icon" href="/assets/favicon.png">
<link rel="apple-touch-icon" href="/assets/touch-icon.png">
<link rel="stylesheet" href="/assets/common.css">

	<link rel="stylesheet" href="/assets/newspaper.css">


<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.0/css/font-awesome.min.css">
<link rel="canonical" href="/">
<link rel="alternate" type="application/atom+xml" title="The Interesting Times of Skipper" href="/feed.xml" />

<!-- Google Font -->
<link href="https://fonts.googleapis.com/css?family=UnifrakturMaguntia" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Libre+Baskerville|Mansalva&display=swap" rel="stylesheet">





	</head>

	<body>

		<div class="head">
  
  <div id="masthead">
    <h1>The Interesting Times of Skipper</h1>
    <h6 style="text-align:center">Programmers never be slaves !!!!</h6>
  </div>
  
</div>


		<div class="content">
			<!-- HERO SECTION -->
<section class="hero">
  <!-- LEFT HERO -->
  <div class="sideHeroColumn">
    
      
    
      
        <article>
  <h3><a href="/heros/2020-06-10-OOCRR-%E7%94%A8%E6%88%B7%E5%8D%8F%E8%AE%AE.html">OOCRR 用户协议</a></h3>
  <img class="bw" src="">
  
  <h6 style="margin: 0px;">10/06/20</h6>
  <h1 id="oocrr-用户协议">OOCRR 用户协议</h1>

<p>OOCRR 用户协议</p>

<p>任何单位或个人在使用OOCRR App服务之前（以下简称“OOCRR”），均应仔细阅读本条款，如不同意本条款可停止使用OOCRR的服务，一旦使用，即被视为对本条款全部内容的认可和接受。 
 一、任何单位或个人通过OOCRR使用到的图片/图像文件包括生成的临时URL链接，均系该用户或所有者制作提供（以下简称“第三方文件”）。本应用只根据图片提供OCR文字识别能力，并不是也不反映OOCRR之任何意见和主张，也不表示OOCRR同意或支持该等第三方文件的任何内容、主张或立场。本应用对第三方文件中内容之合法性、准确性、真实性、适用性、安全性等概不负责，也无法负责。 
 二、OOCRR所提供的识别图片提取文字能力是基于服务器的识别，需要首先将图片上传到服务器识别然后将识别结果展示在App中，之后就会删除图片，不会在OOCRR的服务器上进行存储。 
 三、任何单位或个人不得利用OOCRR上传、读取、下载、复制、发布、传播或者转载如下内容： 
 1、反对宪法所确定的基本原则的； 
 2、危害国家安全，泄露国家秘密，颠覆国家政权，破坏国家统一的； 
 3、损害国家荣誉和利益的； 
 4、煽动民族仇恨、民族歧视，破坏民族团结的； 
 5、破坏国家宗教政策，宣扬邪教和封建迷信的； 
 6、散布谣言，扰乱社会秩序，破坏社会稳定的； 
 7、散布淫秽、色情、赌博、暴力、凶杀、恐怖或者教唆犯罪的； 
 8、侮辱或者诽谤他人，侵害他人合法权益的； 
 9、含有法律、行政法规禁止的其他内容的信息。 
 四、任何单位或个人如需要第三方文件中的内容（包括图片、音频、视频、文档、链接等），并欲据此进行交易或其他行为前，应慎重辨别这些内容的合法性、准确性、真实性、实用性和安全性（包括下载第三方文件中内容是否会感染电脑病毒），并采取谨慎的预防措施。如您不确定这些内容是否合法、准确、真实、实用和安全，OOCRR建议您先咨询专业人士。 
 五、任何单位或者个人因相信、使用第三方文件中信息、服务、产品等内容，或据此进行交易等行为，而引致的人身伤亡、财产毁损（包括因下载而感染电脑病毒）、名誉或商誉诽谤、版权或知识产权等权利的侵犯等事件，及因该等事件所造成的损害后果，OOCRR概不负责，亦不会也不能承担任何法律责任，而应由第三方文件的所有者承担。无论何种原因，OOCRR不对任何非与OOCRR 直接发生的交易和行为承担任何直接、间接、附带或衍生的损失和责任。 
 六、任何单位或个人如认为通过OOCRR服务所得的第三方文件中内容可能涉嫌侵害其合法著作权，应按照《信息网络传播权保护条例》的规定，以书面的形式及时向OOCRR反应，并提供相应身份证明、权属证明及详细的侵权情况证明，OOCRR在收到上述文件后，会尽快断开对该内容的相关服务的链接。如果该等被断开链接的第三方文件所有者认为被提出权利主张的OOCRR 结果并未侵害他人合法著作权的，亦有权按照《信息网络传播权保护条例》的规定，向OOCRR 发出关于被断开链接不违反《信息网络传播权保护条例》的反通知。OOCRR提醒您注意：如您的主张侵权或主张不侵权的陈述失实，您将按照《信息网络传播权保护条例》的规定，承担相关法律责任。 
 七、每一个注册的OOCRR账号最多在5台设备上登录，如果超出5台，会采取限制登录的方式禁止继续登录。注册OOCRR账号之后，请合法使用账号所拥有的权限，任何通过违法手段破解功能及影响OOCRR服务的账号，OOCRR有权对账号实施封禁。 
 八、OOCRR可根据国家法律法规变化及维护用户权益需要，不时修改本条款，变更后的条款将通过法定程序在本条款中标明最后更新日期。</p>

<p>更新日期：2020年06月10日</p>

</article>

        
  </div>

  <!-- HERO -->
  <div class="heroColumn">
    
      
    
      
    
  </div>

  <!-- RIGHT HERO -->
  <div class="sideHeroColumn">
    
      
        <article>
  <h3><a href="/heros/2018-04-04-Charactor-Emoji.html">Emoji</a></h3>
  <img class="bw" src="">
  
  <h6 style="margin: 0px;">04/04/18</h6>
  <p>(&gt;﹏&lt;)</p>

<p>(￣o￣)</p>

<p>→_→</p>

<p>(〜￣▽￣)〜</p>

<p>(^_^)</p>

<p>(●—●)</p>

<p>(☆_☆)</p>

<p>(￣▽￣)</p>

<p>(づ ●─● )づ</p>

<p>～(￣▽￣～)</p>

<p>(￣ε(#￣)</p>

<p>≥﹏≤</p>

<p>(￣へ￣)</p>

<p>⊙_⊙</p>

<p>o(≧v≦)o</p>

<p>(・●・)</p>

<p>(￣o￣).zZ</p>

</article>

        
  </div>

</section>

<!-- MASONRY SECTION -->
<section class="masonry">
  
    <div class="item">
      <article>
  <h3><a href="/columns/2018-03-30-LRU-in-Python.html">LRU in Python</a></h3>
  <img class="bw" src="http://www.scrollpublishing.com/store/media/Thomas-Payne.jpg">
  
  <h6 style="margin: 0px;">30/03/18</h6>
  <h1 id="lru-in-python">LRU in Python</h1>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">LRUCache</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">capacity</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">capacity</span> <span class="o">=</span> <span class="n">capacity</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tm</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cache</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lru</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">lru</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tm</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tm</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>

        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>

    <span class="k">def</span> <span class="nf">set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">capacity</span><span class="p">:</span>
            <span class="c1"># find the LRU entry
</span>            <span class="n">old_key</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lru</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span> <span class="n">key</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">k</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">lru</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">old_key</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">lru</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">old_key</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lru</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tm</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tm</span> <span class="o">+=</span> <span class="mi">1</span>
</code></pre></div></div>

<p>Here tm is the count for access (get success /set).
It guarantees that the latest entry isn’t easily removed and the entry already added but seldem accessed is removed when set happens.</p>

<p>Profile:</p>
<blockquote>
  <p>LRU cache took 1.440 sec</p>
</blockquote>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">collections</span>

<span class="k">class</span> <span class="nc">LRUCache</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">capacity</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">capacity</span> <span class="o">=</span> <span class="n">capacity</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cache</span> <span class="o">=</span> <span class="n">collections</span><span class="o">.</span><span class="n">OrderedDict</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">return</span> <span class="n">value</span>
        <span class="k">except</span> <span class="nb">KeyError</span><span class="p">:</span>
            <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>

    <span class="k">def</span> <span class="nf">set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="k">except</span> <span class="nb">KeyError</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">capacity</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">popitem</span><span class="p">(</span><span class="n">last</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</code></pre></div></div>
<p>The least-used-item is in the head of OrderedDict, which is updated in get().</p>

<p>If there is no key when new key is during set(), firstly we check the capacity.
If capacity is reached, the head of OrderedDict is poped, then the head is empty for new key.</p>

<p>Profile:</p>
<blockquote>
  <p>LRU cache took 0.096 sec</p>
</blockquote>

<blockquote>
  <p>Refs: https://www.kunxi.org/blog/2014/05/lru-cache-in-python/</p>
</blockquote>

</article>

    </div>
  
    <div class="item">
      <article>
  <h3><a href="/columns/2018-03-31-Python-Learning.html">Python Learning</a></h3>
  <img class="bw" src="http://www.scrollpublishing.com/store/media/Thomas-Payne.jpg">
  
  <h6 style="margin: 0px;">31/03/18</h6>
  <h1 id="python-learning">Python Learning</h1>

<blockquote>
  <p>The modification of this post is still ongoing.</p>
</blockquote>

<h2 id="class">Class</h2>

<h4 id="init-open-new-del-and-exit">init, open, new, del and exit</h4>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Vehicle</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span> <span class="s">"Vehicle init"</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">__open__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span> <span class="s">"Vehicle open"</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">__new__</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">print</span> <span class="s">"Vehicle new"</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">Vehicle</span><span class="p">,</span> <span class="n">cls</span><span class="p">)</span><span class="o">.</span><span class="n">__new__</span><span class="p">(</span><span class="n">cls</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span> <span class="s">"Vehicle enter"</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">__del__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span> <span class="s">"Vehicle delete"</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">__exit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exc_type</span><span class="p">,</span> <span class="n">exc_val</span><span class="p">,</span> <span class="n">exc_tb</span><span class="p">):</span>
        <span class="k">print</span> <span class="s">"Vehicle exit"</span>
        <span class="k">pass</span>

<span class="n">Vehicle</span><span class="p">()</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>

    <span class="n">v</span> <span class="o">=</span> <span class="n">Vehicle</span><span class="p">()</span>

    <span class="k">with</span> <span class="n">Vehicle</span><span class="p">()</span> <span class="k">as</span> <span class="n">vv</span><span class="p">:</span>
       <span class="k">pass</span>
</code></pre></div></div>
<p>Outputs:</p>
<blockquote>
  <p>Vehicle init
Vehicle delete
Vehicle init
Vehicle init
Vehicle enter
Vehicle exit
Vehicle delete
Vehicle delete</p>
</blockquote>

<h2 id="iteration">Iteration</h2>

<h4 id="enumeration">enumeration</h4>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">my_list</span> <span class="o">=</span> <span class="p">[</span><span class="s">'apple'</span><span class="p">,</span> <span class="s">'banana'</span><span class="p">,</span> <span class="s">'grapes'</span><span class="p">,</span> <span class="s">'pear'</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">c</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">my_list</span><span class="p">,</span> <span class="mi">2</span><span class="p">):</span> <span class="k">print</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
<span class="o">...</span> 
<span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">'apple'</span><span class="p">)</span>
<span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s">'banana'</span><span class="p">)</span>
<span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="s">'grapes'</span><span class="p">)</span>
<span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="s">'pear'</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">c</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">my_list</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span> <span class="k">print</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
<span class="o">...</span> 
<span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s">'apple'</span><span class="p">)</span>
<span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s">'banana'</span><span class="p">)</span>
<span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">'grapes'</span><span class="p">)</span>
<span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">'pear'</span><span class="p">)</span>
</code></pre></div></div>

<p>Enumerate elements with specified index <em>2</em>, <em>-1</em>.</p>

<h4 id="generator">Generator</h4>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">fib</span><span class="p">(</span><span class="nb">max</span><span class="p">):</span>
    <span class="n">n</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span>
    <span class="k">while</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="nb">max</span><span class="p">:</span>
        <span class="k">yield</span> <span class="n">b</span>
        <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
        <span class="n">n</span> <span class="o">=</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span>
</code></pre></div></div>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">f</span> <span class="o">=</span> <span class="n">fib</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span>
<span class="o">&lt;</span><span class="n">generator</span> <span class="nb">object</span> <span class="n">fib</span> <span class="n">at</span> <span class="mh">0x104feaaa0</span><span class="o">&gt;</span>
</code></pre></div></div>

<h4 id="yield">Yield</h4>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">odd</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'step 1'</span><span class="p">)</span>
    <span class="k">yield</span> <span class="mi">1</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'step 2'</span><span class="p">)</span>
    <span class="k">yield</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'step 3'</span><span class="p">)</span>
    <span class="k">yield</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</code></pre></div></div>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">o</span> <span class="o">=</span> <span class="n">odd</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">o</span><span class="p">)</span>
<span class="n">step</span> <span class="mi">1</span>
<span class="mi">1</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">o</span><span class="p">)</span>
<span class="n">step</span> <span class="mi">2</span>
<span class="mi">3</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">o</span><span class="p">)</span>
<span class="n">step</span> <span class="mi">3</span>
<span class="mi">5</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">o</span><span class="p">)</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s">"&lt;stdin&gt;"</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="nb">StopIteration</span>
</code></pre></div></div>

<h3 id="filter">Filter</h3>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">is_palindrome</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">n</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
    <span class="n">m</span><span class="o">=</span><span class="n">n</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">n</span><span class="o">==</span><span class="n">m</span>

<span class="n">output</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span><span class="n">is_palindrome</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1000</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s">'1~1000:'</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="n">output</span><span class="p">))</span>
<span class="k">if</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="n">is_palindrome</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">200</span><span class="p">)))</span> <span class="o">==</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">33</span><span class="p">,</span> <span class="mi">44</span><span class="p">,</span> <span class="mi">55</span><span class="p">,</span> <span class="mi">66</span><span class="p">,</span> <span class="mi">77</span><span class="p">,</span> <span class="mi">88</span><span class="p">,</span> <span class="mi">99</span><span class="p">,</span> <span class="mi">101</span><span class="p">,</span> <span class="mi">111</span><span class="p">,</span> <span class="mi">121</span><span class="p">,</span> <span class="mi">131</span><span class="p">,</span> <span class="mi">141</span><span class="p">,</span> <span class="mi">151</span><span class="p">,</span> <span class="mi">161</span><span class="p">,</span> <span class="mi">171</span><span class="p">,</span> <span class="mi">181</span><span class="p">,</span> <span class="mi">191</span><span class="p">]:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'测试成功!'</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'测试失败!'</span><span class="p">)</span>
</code></pre></div></div>

</article>

    </div>
  
    <div class="item">
      <article>
  <h3><a href="/columns/2018-04-03-Unit-Test-in-Python.html">Python Unit Test</a></h3>
  <img class="bw" src="http://www.scrollpublishing.com/store/media/Thomas-Payne.jpg">
  
  <h6 style="margin: 0px;">03/04/18</h6>
  <h1 id="python-unit-test">Python Unit Test</h1>

<p>##Basic Unit Test</p>

<p>Test Class</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="mi">1</span> <span class="k">class</span> <span class="nc">Widget</span><span class="p">:</span>
  <span class="mi">2</span>     <span class="n">name_</span> <span class="o">=</span> <span class="s">"Default"</span>
  <span class="mi">3</span>     <span class="n">size_</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
  <span class="mi">4</span>
  <span class="mi">5</span>     <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
  <span class="mi">6</span>         <span class="bp">self</span><span class="o">.</span><span class="n">name_</span> <span class="o">=</span> <span class="n">name</span>
  <span class="mi">7</span>
  <span class="mi">8</span>     <span class="k">def</span> <span class="nf">size</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
  <span class="mi">9</span>         <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">size_</span>
 <span class="mi">10</span>
 <span class="mi">11</span>     <span class="k">def</span> <span class="nf">resize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">width</span><span class="p">):</span>
 <span class="mi">12</span>         <span class="bp">self</span><span class="o">.</span><span class="n">size_</span> <span class="o">=</span> <span class="p">([</span><span class="n">height</span><span class="p">,</span> <span class="n">width</span><span class="p">])</span>
 <span class="mi">13</span>
 <span class="mi">14</span>     <span class="k">def</span> <span class="nf">dispose</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
 <span class="mi">15</span>         <span class="bp">self</span><span class="o">.</span><span class="n">name_</span> <span class="o">=</span> <span class="s">"Default"</span>
 <span class="mi">16</span>         <span class="bp">self</span><span class="o">.</span><span class="n">size_</span> <span class="o">=</span> <span class="bp">None</span>
</code></pre></div></div>
<p>Test Case</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="mi">1</span> <span class="kn">import</span> <span class="nn">unittest</span>
  <span class="mi">2</span>
  <span class="mi">3</span>
  <span class="mi">4</span> <span class="k">class</span> <span class="nc">MyTestCase</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
  <span class="mi">5</span>
  <span class="mi">6</span>     <span class="k">def</span> <span class="nf">test_upper</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
  <span class="mi">7</span>         <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="s">'foo'</span><span class="o">.</span><span class="n">upper</span><span class="p">(),</span> <span class="s">'FOO'</span><span class="p">)</span>
  <span class="mi">8</span>
  <span class="mi">9</span>     <span class="k">def</span> <span class="nf">test_isupper</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
 <span class="mi">10</span>         <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="s">'FOO'</span><span class="o">.</span><span class="n">isupper</span><span class="p">())</span>
 <span class="mi">11</span>         <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="s">'Foo'</span><span class="o">.</span><span class="n">isupper</span><span class="p">())</span>
 <span class="mi">12</span>
 <span class="mi">13</span>     <span class="k">def</span> <span class="nf">test_split</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
 <span class="mi">14</span>         <span class="n">s</span> <span class="o">=</span> <span class="s">'hello world'</span>
 <span class="mi">15</span>         <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">split</span><span class="p">(),</span> <span class="p">[</span><span class="s">'hello'</span><span class="p">,</span> <span class="s">'world'</span><span class="p">])</span>
 <span class="mi">16</span>
 <span class="mi">17</span>         <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="nb">TypeError</span><span class="p">):</span> <span class="c1"># Exception
</span> <span class="mi">18</span>             <span class="n">s</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>                     <span class="c1"># It should be exception here
</span> <span class="mi">19</span>
 <span class="mi">20</span> <span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
 <span class="mi">21</span>     <span class="c1"># unittest.main()
</span> <span class="mi">22</span>
 <span class="mi">23</span>     <span class="n">suite</span> <span class="o">=</span> <span class="n">unittest</span><span class="o">.</span><span class="n">TestLoader</span><span class="p">()</span><span class="o">.</span><span class="n">loadTestsFromTestCase</span><span class="p">(</span><span class="n">MyTestCase</span><span class="p">)</span>
 <span class="mi">24</span>     <span class="n">unittest</span><span class="o">.</span><span class="n">TextTestRunner</span><span class="p">(</span><span class="n">verbosity</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">suite</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="advanced-unit-test">Advanced Unit Test</h2>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="mi">1</span> <span class="kn">import</span> <span class="nn">unittest</span>
  <span class="mi">2</span> <span class="kn">import</span> <span class="nn">sys</span>
  <span class="mi">3</span> <span class="kn">import</span> <span class="nn">Widget</span>
  <span class="mi">4</span>
  <span class="mi">5</span> <span class="k">class</span> <span class="nc">WidgetTestCase</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
  <span class="mi">6</span>     <span class="o">@</span><span class="nb">classmethod</span>
  <span class="mi">7</span>     <span class="k">def</span> <span class="nf">setUpClass</span><span class="p">(</span><span class="n">cls</span><span class="p">):</span>
  <span class="mi">8</span>         <span class="k">pass</span>
  <span class="mi">9</span>
 <span class="mi">10</span>     <span class="o">@</span><span class="nb">classmethod</span>
 <span class="mi">11</span>     <span class="k">def</span> <span class="nf">tearDownClass</span><span class="p">(</span><span class="n">cls</span><span class="p">):</span>
 <span class="mi">12</span>         <span class="k">pass</span>
 <span class="mi">13</span>
 <span class="mi">14</span>     <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
 <span class="mi">15</span>         <span class="bp">self</span><span class="o">.</span><span class="n">widget</span> <span class="o">=</span> <span class="n">Widget</span><span class="o">.</span><span class="n">Widget</span><span class="p">(</span><span class="s">"The widget"</span><span class="p">)</span>
 <span class="mi">16</span>
 <span class="mi">17</span>     <span class="k">def</span> <span class="nf">tearDown</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
 <span class="mi">18</span>         <span class="bp">self</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">dispose</span><span class="p">()</span>
 <span class="mi">19</span>         <span class="bp">self</span><span class="o">.</span><span class="n">widget</span> <span class="o">=</span> <span class="bp">None</span>
 <span class="mi">20</span>
 <span class="mi">21</span>     <span class="k">def</span> <span class="nf">test_default_size</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
 <span class="mi">22</span>         <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">size</span><span class="p">(),</span> <span class="p">([</span><span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="p">]),</span>
 <span class="mi">23</span>                          <span class="s">'incorrect default size'</span><span class="p">)</span>
 <span class="mi">24</span>
 <span class="mi">25</span>     <span class="k">def</span> <span class="nf">test_resize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
 <span class="mi">26</span>         <span class="bp">self</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">150</span><span class="p">)</span>
 <span class="mi">27</span>         <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">size</span><span class="p">(),</span> <span class="p">([</span><span class="mi">100</span><span class="p">,</span> <span class="mi">150</span><span class="p">]),</span>
 <span class="mi">28</span>                          <span class="s">'wrong size after resize'</span><span class="p">)</span>
 <span class="mi">29</span>
 <span class="mi">30</span>     <span class="o">@</span><span class="n">unittest</span><span class="o">.</span><span class="n">skip</span><span class="p">(</span><span class="s">"demostrating skipping"</span><span class="p">)</span>
 <span class="mi">31</span>     <span class="k">def</span> <span class="nf">test_nothing</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
 <span class="mi">32</span>         <span class="k">pass</span>
 <span class="mi">33</span>
 <span class="mi">34</span>     <span class="o">@</span><span class="n">unittest</span><span class="o">.</span><span class="n">skipUnless</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">platform</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">"win"</span><span class="p">),</span> <span class="s">"requires Windows"</span><span class="p">)</span>
 <span class="mi">35</span>     <span class="k">def</span> <span class="nf">test_windows_support</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
 <span class="mi">36</span>         <span class="c1"># windows specific testing code
</span> <span class="mi">37</span>         <span class="k">pass</span>
 <span class="mi">38</span>
 <span class="mi">39</span>     <span class="o">@</span><span class="n">unittest</span><span class="o">.</span><span class="n">expectedFailure</span>
 <span class="mi">40</span>     <span class="k">def</span> <span class="nf">test_fail</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
 <span class="mi">41</span>         <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s">"broken"</span><span class="p">)</span>
 <span class="mi">42</span>
 <span class="mi">43</span> <span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
 <span class="mi">44</span>
 <span class="mi">45</span>     <span class="s">""" No.1 Method """</span>
 <span class="mi">46</span>     <span class="s">"""
 47     widgetTestSuite = unittest.TestSuite()
 48     defaultSizeTestCase = WidgetTestCase('test_default_size')
 49     resizeTestCase = WidgetTestCase('test_resize')
 50
 51     widgetTestSuite.addTest(defaultSizeTestCase)
 52     widgetTestSuite.addTest(resizeTestCase)
 53     """</span>
 <span class="mi">54</span>
 <span class="mi">55</span>     <span class="s">""" No.2 Method """</span>
 <span class="mi">56</span>     <span class="n">widgetTestSuite</span> <span class="o">=</span> <span class="n">unittest</span><span class="o">.</span><span class="n">TestLoader</span><span class="p">()</span><span class="o">.</span><span class="n">loadTestsFromTestCase</span><span class="p">(</span><span class="n">WidgetTestCase</span><span class="p">)</span>
 <span class="mi">57</span>
 <span class="mi">58</span>     <span class="n">unittest</span><span class="o">.</span><span class="n">TextTestRunner</span><span class="p">(</span><span class="n">verbosity</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">widgetTestSuite</span><span class="p">)</span>
 <span class="mi">59</span>     <span class="c1"># unittest.main()
</span></code></pre></div></div>

</article>

    </div>
  
</section>

		</div>

	</body>

	
		<footer>
		  <footer class="footer">
  <div class="footer-left col-md-4 col-sm-6">
    <p class="about">
      <span> Legalese</span> The information and opinions within this website are for information purposes only. They are not intended to constitute legal or other professional advice, and should not be relied on or treated as a substitute for specific advice relevant to particular circumstances. We accept no responsibility for any errors, omissions or misleading statements on this website, or for any loss which may arise from reliance on materials contained on this website. Certain parts of this site may link to external Internet sites, and other external Internet sites may link to this website. We are not responsible for the content of any external Internet sites.
    </p>
    <div class="icons">
      <a href="https://twitter.com/twitter"><i class="fa fa-twitter"></i></a>
      <a href="https://www.linkedin.com/in/linkedin"><i class="fa fa-linkedin"></i></a>
      <a href="https://github.com/phoenixtomax"><i class="fa fa-github"></i></a>
      <a href="https://facebook.com/facebook"><i class="fa fa-facebook"></i></a>
    </div>
  </div>
  <div class="footer-center col-md-4 col-sm-6">
    <div>
      <i class="fa fa-map-marker"></i>
      <p><span> Fake Street, 123</span> Springfield, OH</p>
    </div>
    <div>
      <i class="fa fa-phone"></i>
      <p> (+1) 1234 555 321</p>
    </div>
    <div>
      <i class="fa fa-envelope"></i>
      <p><a href="#">hello@interestingtimes.com</a></p>
    </div>
  </div>
  <div class="footer-right col-md-4 col-sm-6">
    <h2> The Interesting<span> Media</span></h2>
    <p class="menu">
      <a href="/"> Home</a>
    </p>
    <p class="name"> The Interesting Media Company &copy; 2020</p>
  </div>
</footer>

		</footer>
	
	<p class="love">Made with <i class="fa fa-heart"></i> by <a href="https://alvaroduran.com">Álvaro</a></p>

</html>
